{% extends 'base.html' %}
{% block title %}‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å - IMSUK{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto p-6">
  <h1 class="text-4xl font-extrabold text-custom-darkgreen mb-8 text-center">üç± ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
  <form method="get" action="{% url 'home' %}" class="mb-10">
    <div class="flex items-center">
      <div class="relative flex-grow">
        <input type="text" name="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£..." value="{{ request.GET.q }}"
               class="w-full pl-12 pr-4 py-3 border border-custom-green rounded-l-xl shadow-md focus:outline-none focus:ring-2 focus:ring-custom-darkgreen transition">
        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-custom-darkgreen text-xl">üîç</span>
      </div>
      <button type="submit"
              class="bg-custom-darkgreen text-white px-6 py-3 rounded-r-xl hover:bg-custom-darkgreen-hover transition duration-300 font-semibold">
        ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
      </button>
    </div>
  </form>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for item in menu_items %}
      <div class="bg-custom-lightpink rounded-2xl shadow-md overflow-hidden hover:shadow-xl transition duration-300">
        {% if item.image %}
          <img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-full h-48 object-cover">
        {% else %}
          <div class="w-full h-48 bg-gray-200 flex items-center justify-center text-gray-500">
            ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
          </div>
        {% endif %}
        <div class="p-4">
          <h2 class="text-xl font-bold text-custom-darkgreen mb-1">{{ item.name }}</h2>
          <p class="text-sm italic text-gray-600 mb-2">‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô <span class="text-custom-brown font-medium">{{ item.restaurant.name }}</span></p>

          {% if item.promotion_set.all %}
            <div class="flex items-center mb-2">
              <span class="bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded mr-2">-{{ item.promotion_set.first.discount_percent }}%</span>
              <span class="text-custom-darkgreen font-semibold">{{ item.sale_price }} ‡∏ø</span>
              <span class="text-gray-500 line-through ml-2">{{ item.promotion_set.first.original_price }} ‡∏ø</span>
            </div>
          {% else %}
            <p class="text-custom-darkgreen font-semibold mb-2">‡∏ø{{ item.sale_price }}</p>
          {% endif %}

          <p class="text-sm text-gray-600 flex items-center">
            <span class="text-xl mr-1">‚è∞</span>
            {{ item.restaurant.open_time|time:'H:i' }} - {{ item.restaurant.close_time|time:'H:i' }}
          </p>
          <a href="{% url 'menu_detail' item.id %}" class="text-custom-pink hover:underline text-base mt-2 inline-block transition">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
        </div>
      </div>
    {% empty %}
      <p class="text-xl text-gray-600 col-span-full text-center py-6">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
