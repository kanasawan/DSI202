{% extends 'base.html' %}
{% load static %}
{% block title %}เมนูอาหารทั้งหมด - IMSUK{% endblock %}

{% block content %}
  <!-- โลโก้ + สโลแกน ที่ขอบบน -->
  <div class="flex items-center justify-center space-x-4 mb-6 bg-white p-4 rounded shadow">
    <img src="{% static 'image/imsuk.png' %}"
         alt="IMSUK Logo"
         class="h-12 w-12 object-contain">
    <span class="text-2xl font-bold text-green-600">
      อิ่มคุ้ม ครบครันในคลิกเดียว
    </span>
  </div>

  <h1 class="text-2xl font-bold mb-4">เมนูอาหารทั้งหมด</h1>

  <!-- ช่องค้นหา -->
  <form method="get" class="mb-6 flex gap-2">
    <input type="text" name="q" value="{{ query }}" placeholder="ค้นหาเมนู..."
           class="w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-500">
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
      ค้นหา
    </button>
  </form>

  <!-- รายการเมนู -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    {% for item in menu_items %}
      <div class="bg-white rounded-lg shadow-md p-4 flex flex-col justify-between">
        <img src="{{ item.image.url }}" alt="{{ item.name }}"
             class="h-40 w-full object-cover rounded">
        <div class="mt-2">
          <h2 class="text-lg font-semibold">{{ item.name }}</h2>
          <p class="text-gray-600 mb-1">จากร้าน: {{ item.restaurant.name }}</p>
          {% if item.original_price > item.sale_price %}
            <p class="text-sm line-through text-gray-400">฿{{ item.original_price }}</p>
          {% endif %}
          <p class="text-red-600 font-bold text-lg">฿{{ item.sale_price }}</p>
        </div>
        <div class="mt-4 flex space-x-2">
          <form method="post" action="{% url 'add_to_cart' item.id %}">
            {% csrf_token %}
            <button type="submit"
                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded text-sm">
              เพิ่มลงตะกร้า
            </button>
          </form>
          <a href="{% url 'cart' %}"
             class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
            สั่งเลย
          </a>
          <a href="{% url 'restaurant_detail' item.restaurant.id %}"
             class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded text-sm">
            รายละเอียด
          </a>
        </div>
      </div>
    {% empty %}
      <p class="text-gray-500 col-span-3">ไม่พบเมนูอาหาร</p>
    {% endfor %}
  </div>
{% endblock %}
