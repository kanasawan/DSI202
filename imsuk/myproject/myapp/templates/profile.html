{% extends 'base.html' %}
{% block title %}‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white bg-opacity-90 backdrop-blur-md p-10 rounded-3xl shadow-2xl mt-10 ring-1 ring-custom-pink">
  <h2 class="text-4xl font-extrabold text-custom-darkgreen text-center mb-10">üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>

  <form method="post" action="{% url 'profile' %}" class="space-y-10">
    {% csrf_token %}

    <!-- ‚úÖ ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div class="space-y-6">
      <div>
        <label class="block text-base font-semibold text-custom-darkgreen">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
        <input type="text" name="username" value="{{ user.username }}"
               class="w-full mt-2 p-3 border border-custom-green rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-darkgreen transition">
      </div>
      <div>
        <label class="block text-base font-semibold text-custom-darkgreen">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
        <input type="email" name="email" value="{{ user.email }}"
               class="w-full mt-2 p-3 border border-custom-green rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-darkgreen transition">
      </div>
      <div>
        <label class="block text-base font-semibold text-custom-darkgreen">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°</label>
        <input type="text" name="full_name" value="{{ user.first_name }}"
               class="w-full mt-2 p-3 border border-custom-green rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-darkgreen transition">
      </div>
    </div>

    <!-- ‚úÖ ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà -->
    <div class="p-6 bg-custom-cream rounded-xl shadow-inner">
      <h3 class="text-xl font-bold text-custom-darkgreen mb-4">üè† ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
      {% if default_address %}
        <p class="text-base text-gray-700 whitespace-pre-line">{{ default_address.address }}</p>
        <p class="text-base text-gray-600 mt-2">üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: {{ default_address.phone }}</p>
        <a href="{% url 'address_update' %}"
           class="inline-block mt-4 bg-custom-darkgreen text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-300 text-sm shadow">
          ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà
        </a>
      {% else %}
        <p class="text-base text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</p>
        <a href="{% url 'address_form' %}"
           class="inline-block mt-4 bg-custom-darkgreen text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-300 text-sm shadow">
          ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà
        </a>
      {% endif %}
    </div>

    <!-- ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö & ‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ -->
    <div class="p-6 bg-custom-lightpink rounded-xl shadow-inner">
      <h3 class="text-xl font-bold text-custom-darkgreen mb-4">üçΩ ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
        {% for label in filters %}
          <label class="flex items-center space-x-3">
            <input type="checkbox" name="likes" value="{{ label }}" class="form-checkbox h-5 w-5 text-custom-darkgreen">
            <span class="text-base text-gray-700">{{ label }}</span>
          </label>
        {% endfor %}
        <label class="flex items-center space-x-3 col-span-2 md:col-span-3">
          <input type="checkbox" id="other_like_toggle" name="likes" value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ" class="form-checkbox h-5 w-5 text-custom-darkgreen"
                 onchange="document.getElementById('other_like_input').classList.toggle('hidden')">
          <span class="text-base text-gray-700">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</span>
          <input type="text" name="other_like" id="other_like_input"
                 class="hidden border border-custom-green rounded p-2 w-1/2 focus:outline-none focus:ring-2 focus:ring-custom-darkgreen transition">
        </label>
      </div>

      <h4 class="text-lg font-bold text-custom-darkgreen mb-2 mt-6">üö´ ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h4>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        {% for allergen in allergens %}
          <label class="flex items-center space-x-3">
            <input type="checkbox" name="allergens" value="{{ allergen }}" class="form-checkbox h-5 w-5 text-red-500">
            <span class="text-base text-gray-700">{{ allergen }}</span>
          </label>
        {% endfor %}
        <label class="flex items-center space-x-3 col-span-2 md:col-span-3">
          <input type="checkbox" id="other_allergen_toggle" name="allergens" value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ" class="form-checkbox h-5 w-5 text-red-500"
                 onchange="document.getElementById('other_allergen_input').classList.toggle('hidden')">
          <span class="text-base text-gray-700">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</span>
          <input type="text" name="other_allergen" id="other_allergen_input"
                 class="hidden border border-custom-green rounded p-2 w-1/2 focus:outline-none focus:ring-2 focus:ring-custom-darkgreen transition">
        </label>
      </div>
    </div>

    <!-- ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
    <div class="text-center mt-6">
      <button type="submit" name="save_profile"
              class="bg-custom-darkgreen text-white px-8 py-3 rounded-full hover:bg-green-700 transition duration-300 font-semibold text-lg shadow">
        üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
      </button>
    </div>
  </form>
</div>
{% endblock %}
